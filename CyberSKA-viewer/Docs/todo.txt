- clients should no longer send mouse position to the server, as they are able
  to calculate the image coordinate directly. They should send the image coordinate
  instead. This allows us to share coordinates more efficiently (without a round trip
  to the server), for example for synchronizing the main window with the profiles.

- implement dynamic caching on the client side, for example for the last couple of
  visited values/cursor locations/profiles, eliminating some latency

- related to the caching, if we have the cache we could also try to dynamically preload
  some information (e.g. cursor values/locations/profiles in the immediate vicinity
  of the cursor, and sky is the limit...)

- very large frames don't load (hitogram preset calculation needs way too much memory
  so it aborts, e.g. http://www.cyberska.org/pg/file/read/28238/m31_mosaic_bfits
  which is 11963 x 47617 file.

- cunit3 is being ignored by casacore??? e.g.
  http://www.cyberska.org/pg/file/read/28292/ophiuchus-in-12co32
  reports Hz for 3rd axis, even though the cunit3 is in km/s

- finish implementing all remaining functionality

- fix HistogramDialog.cpp so that it only recalculates things it needs to recalculate,
  especially calculating/drawing the histogram. For example, if only the cursor/clip
  regions change, there is no need to recalculate it. Or if the histogram window is
  not visible, there is no need to draw nor to calculate it.

- remove all dependencies from the server process on X11 (make it run headless)

- implement rotational measure synthesis as per. Russ's python script (in a message
  on cyberska.org site)

- gauss 2d - add option to subtract fit from image

- gauss1d fit:
  x transparent fit line (to be able to see plot underneath)
  x In the default zoom settings the option to label peaks puts the display of the
    fitted values right over the top of the Gaussian, basically blocking the view of
    the data and fit.  It would be good to offset this display of the values from the
    position of the peak so that it is displayed beside the peak instead of on top.
    Also you can probably reduce the font of this a bit so that t does not take up as
    much display real estate.

  x A query?  Is it possible to make the red line showing the fit semi-transparent
    so that the data in the backround partially shows through?  Not sure if lines have
    a transparency property.

  x It would be good if the residual display defaulted to a colour that had a bit
    more contrast with the original data.

Cosmetic (maybe?):
- Axis labels in fitting mode
x Mapping Gaussian parameters into WCS values.  If this were toggleable between pixel , I'd be even happier
x I would indicate that the number of terms is the degree-1 for the polynomial fit
x I found the interaction with the manual initial conditions and the zoom function to
  be tricky.  If I missed when I went to grab the initial condition box, then I'd zoom
  to something unuseful.  Perhaps turn off zooming when interacting with the initial
  conditions.
- It's very easy to drag the top of the Fit window out of the tool canvas,
  making it difficult to retrieve.
x Is the RMS displayed beneath the derived fit parameters the RMS of the residual?
  It seems to be a statistic of merit of some sort which is good.
x sometimes 5 Gaussians is not enough!
x The ability to toggle the display of the initial condition manipulation bars while
  not eliminating the manual initial condition fit.

More substantial
- The autoscaling topics you mentioned on the telecon would be nice to include.
- The ability to constrain Gaussians to have positive amplitudes or to have centroids
  within the fitting box and later do that on a Gaussian-by-Gaussian basis.
- The ability to export Gaussian fit results.
x Sorting the Gaussians in the display.  I think in order of centroid is the right way
  to do it just as a default.
- It might be nice to highlight the Gaussian in question when hovering over its fits
  parameters.
- The ability to reset initial conditions on a Gaussian by gaussian case.  Again,
  sometimes the fit would run far outside of the domain and try to find an optimum where
  there was no data.
- The ability to fit to separated portions of the x-domain.  Or said alternatively,
  the ability to ignore portions of the data.  This use case is seen in places where
  there is a polynomial trend you want to model independently of the Gaussian. Thus,
  you would want to fit the polynomial in portions of the domain away from where the
  Gaussian is (This is baseline fitting, Russ).

General comments on the tool (i.e., not 1D Gaussian fitting):
- In the region statistics, it would be neat to just pop up a pixel histogram.
  I know you're calculating it because you show it when you draw the histogram for the
  brightness / colour map adjustments.
- In the region stats, it would be nice to report single number stats over a cube and
  not just a plane.  Perhaps by putting a pair of or sliders or a single slider with
  two toggles to set min and max channel in the cube would work.  The channel traces
  of the stats are quite nice.





- fix globalstate to only recompute & send events when all profiles are received
- in scatterplot - make radius changes faster (using precomputed alpha bitmask)
- in scatterplot - make smoother changes to 'in range' dots (increasing radius, increasing alpha?)

- display coordinates in multiple systems simultaneously (ala old client side viz)

- I also liked the function in the old client that allowed the user to toggle
  between showing the graphic, the fitted gaussian or the difference between the fit and the data.  That was a very nice feature.

- to have an option to show Q/I and U/I. I.e to divide Q and U by the value of Stokes
  I at the same pixel and frequency location. Essentially dividing the Q  and U profiles
  by the I profile.  A potential for divide by small number creating very large output
  values, so we would need to build in some smarts for the calculation and the display.

- On an unrelated matter. I think it would be good if we had a conversation with Erik to
  discuss the functionality and interface for the 1D Gaussing fitting to spectral profiles,
  so we are ready to assess the scope of that job as a potential near-term priority. Rob
  is this something we should put on the agenda for the technical meeting, or would ti
  be best to do it separately.  Perhaps a good way to proceed is for Erik and I to put
  something on paper?

- add units to guass 1d fitting

- show residual in gauss 2d fitting

- new ASTLIB

- new QT

- GSL with no range checking

- Implement settings dialog & figure out a mechanism for saving user settings, maybe to elgg

- Make the main canvas window (title panel) be always below other windows

- Investigate overriding popupmanager and/or systemmanager to implement depth-aware
  stacking order. Some info might be here:
  http://cookbooks.adobe.com/post_Overriding_framework_default_implementations_for_m-13828.html
  http://segfaultlabs.com/devlogs/overriding-default-flexair-mxmanagers-implementations

- add 'append' support for large arrays

- only send data to profile dialogs if they are open

- update the timeout mechanism for killing the app

- refactor the 2d plot dialog into a more generic 2d plot component, so that it can be
  used inside other UI elements

- when displaying region stats plots and playing a movie, there is no need to re-compute
  and re-send all the graphs, they are the same...

- get rid of reliance on X on the server side (make the app run headless)

- render movies at full speed

- vies along xy, xz, yz, arbitrary cut

- switch to view I, Q or U cubes

- support loading multiple files

- profiles along arbitrary lines/curves

-----------------------------------------------------------------------------------------

x show residual in gauss 1d fitting

x manual edit of gauss 1d fitting

x honor plot options in gauss 1d fitting

x gauss 1d optimization: DataInterface range checking is on, remove it

x Increase performance of 2D plots (by bitmap caching the graph/grid)

x Dramatically improve performance of scatter plot (using bitmap drawing instead of vectors)

x Add rainbow colormap option to scatter plot

x Add option to not plot values outside of a certain range in scatter plot

x Add zoom to scatter plot

x Add fractional polarized intensity option for IQU sets

x put in a crude colour matching between channel and colour of the dots in the Q versus U
  display.  This is to bring out any patterns in terms of location of the dots on the plot
  with frequency.  If there is a true polarized signal then as one moves in frequency the
  dots should trace out a pattern.  The colour graduation  does not need to be too fine.
  Going from red to green to blue would be enough I think.

x The format of the report of the output values that you had for the client server was good.

x Not sure that I like the Gaussian fitting as an add on to the region button.
  I recall that you mentioned that to do it any other way would be a lot of work.
  My preference would be to have a separate button in the image bar that brought up a separate fitting tool that was distinct from the region statistics.

x Add more profile rendering options (ala kvis)

x when grid is toggled in the main canvas, it should be still possible to view the whole
  image, but currently this is not possible (not sure how to handle this properly)

x Investigate SandboxMouseEvent in flex to see if dragging can be improved

x update region stats when coordinate system changes

x When I toggle "region" off the graphic that displays the Gaussian solution on the page
  remains.  It should go away.  Also the region defined in the previous run of "region"
  seems to be kept.

x The position angle reported seems to be measured clockwise from the y axis in the
  pixel coordinate frame.


x On a separate note, the label "Fit" for reseting autoscaling in the profile window
  is probably a bad choice, since we intend to add a 1D gaussian fitting tool to the
  profile window in the next priority.  Would something like "unzoom" or "autoscale"
  be better?

x I think that the ability to plot quantities versus channel in the region tool is
  not sufficiently obvious to the user.  The link attached to the value is too subtle.
  Would it be possible to add a little icon on the right hand side of the region value
  reporting window that indicted that a plot is available and could be clicked by the user
  to toggle the plot on an off?  A little plot icon would be nice.  Would this be easy or
  difficult?  The plot icons would appear only for 3D data sets.

x When zooming in on a profile window there is no way to reset the zoom back to viewing
  all the data without going into the options menu and clicking on automatic scaling.
  I think we need a shortcut zoom reset button on the top bar of the profile window that
  resets the zoom back to autoscaling.  One button that does both axes is fine I think.

